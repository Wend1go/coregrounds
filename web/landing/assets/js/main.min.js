function itemClicked(i,e){$(".unit-image").removeClass("selected"),$(i).addClass("selected"),e=e.toUpperCase(),$(".collapsable").hide(200),$("#"+e).show(200)}$(document).ready(function(){$.ajax({url:"assets/server_config.json",dataType:"json",success:function(i){var e={};for(var s in i.factories){var a=i.factories[s];e[a.id]=a}var l=i.towers;for(var s in l){var o=l[s],t=e[o.id],n='<img onclick="itemClicked(this, \'{0}\')" class="unit-image tower-image" src="{1}"/>'.replace("{0}",o.name.trim()).replace("{1}","assets/units/"+o.id+".svg");$(n).appendTo("#tower-images");var c="<div class='collapsable' id='{0}'>                                    <span class='tower-name'>{0}</span>                                    <p class='tower-desc'>                                    {1} <br/>                                    {2} <br/>                                    <span class='difficulty '>Difficulty: <span class={3}>{3}</span></span>                                    </p>                                </div>".replace(/\{0\}/g,o.name.toUpperCase()).replace("{1}",e[o.id].description).replace("{2}",e[o.id].meta).replace(/\{3\}/g,t.difficulty);$(c).appendTo("#tower-descs")}minions=i.minions;for(var s in i.minions){var r=minions[s];if(t=e[r.id]){var d='<img onclick="itemClicked(this, \'{0}\')" class="unit-image minion-image" src="{1}"/>'.replace("{0}",r.name.trim()).replace("{1}","assets/units/"+r.id+".svg");$(d).appendTo("#minion-images");var p="<div class='collapsable' id='{0}'>                                    <span class='minion-name'>{0}</span>                                    <p class='minion-desc'>                                    {1} <br/>                                    {2} <br/>                                    <span class='difficulty '>Difficulty: <span class={3}>{3}</span></span>                                    </p>                                </div>".replace(/\{0\}/g,r.name.toUpperCase()).replace("{1}",t.description).replace("{2}",t.meta).replace(/\{3\}/g,t.difficulty);$(p).appendTo("#minion-descs")}}abilities=i.abilities;for(var s in abilities){var h=abilities[s];h.name=h.name.replace(" ","-");var f='<img onclick="itemClicked(this, \'{0}\')" class="unit-image ability-image" src="{1}"/>'.replace("{0}",h.name.trim()).replace("{1}","assets/units/"+h.id+".svg");$(f).appendTo("#ability-images");var m="<div class='collapsable' id='{0}'>                                    <span class='ability-name'>{0}</span>                                    <p class='ability-desc'>                                    {1} <br/>                                    {2} <br/>                                    <span class='difficulty '>Difficulty: <span class={3}>{3}</span></span>                                    </p>                                </div>".replace(/\{0\}/g,h.name.toUpperCase()).replace("{1}",h.description).replace("{2}",h.meta).replace(/\{3\}/g,h.difficulty);$(m).appendTo("#ability-descs")}}});var i,e=$(window),s=$("body"),a=$("#wrapper"),l=$("#header"),o=$("#footer"),t=$("#main"),n=t.children("article");(breakpoints({xlarge:["1281px","1680px"],large:["981px","1280px"],medium:["737px","980px"],small:["481px","736px"],xsmall:["361px","480px"],xxsmall:[null,"360px"]}),e.on("load",function(){window.setTimeout(function(){s.removeClass("is-preload")},100)}),"ie"==browser.name)&&e.on("resize.flexbox-fix",function(){clearTimeout(i),i=setTimeout(function(){a.prop("scrollHeight")>e.height()?a.css("height","auto"):a.css("height","100vh")},250)}).triggerHandler("resize.flexbox-fix");var c=l.children("nav"),r=c.find("li");r.length%2==0&&(c.addClass("use-middle"),r.eq(r.length/2).addClass("is-middle"));var d=200,p=!1;if(t._show=function(i,a){var c=n.filter("#"+i);if(0!=c.length){if(p||void 0!==a&&!0===a)return s.addClass("is-article-visible"),n.removeClass("active"),l.hide(),o.hide(),t.show(),c.show(),c.addClass("active"),p=!1,void setTimeout(function(){s.removeClass("is-switching")},a?1e3:0);if(p=!0,s.hasClass("is-article-visible")){var r=n.filter(".active");r.removeClass("active"),setTimeout(function(){r.hide(),c.show(),setTimeout(function(){c.addClass("active"),e.scrollTop(0).triggerHandler("resize.flexbox-fix"),setTimeout(function(){p=!1},d)},25)},d)}else s.addClass("is-article-visible"),setTimeout(function(){l.hide(),o.hide(),t.show(),c.show(),setTimeout(function(){c.addClass("active"),e.scrollTop(0).triggerHandler("resize.flexbox-fix"),setTimeout(function(){p=!1},d)},25)},d)}},t._hide=function(i){var a=n.filter(".active");if(s.hasClass("is-article-visible")){if(void 0!==i&&!0===i&&history.pushState(null,null,"#"),p)return s.addClass("is-switching"),a.removeClass("active"),a.hide(),t.hide(),o.show(),l.show(),s.removeClass("is-article-visible"),p=!1,s.removeClass("is-switching"),void e.scrollTop(0).triggerHandler("resize.flexbox-fix");p=!0,a.removeClass("active"),setTimeout(function(){a.hide(),t.hide(),o.show(),l.show(),setTimeout(function(){s.removeClass("is-article-visible"),e.scrollTop(0).triggerHandler("resize.flexbox-fix"),setTimeout(function(){p=!1},d)},25)},d)}},n.each(function(){var i=$(this);$('<div class="close">Close</div>').appendTo(i).on("click",function(){location.hash=""}),i.on("click",function(i){i.stopPropagation()})}),s.on("click",function(i){s.hasClass("is-article-visible")&&t._hide(!0)}),e.on("keyup",function(i){switch(i.keyCode){case 27:s.hasClass("is-article-visible")&&t._hide(!0)}}),e.on("hashchange",function(i){""==location.hash||"#"==location.hash?(i.preventDefault(),i.stopPropagation(),t._hide()):n.filter(location.hash).length>0&&(i.preventDefault(),i.stopPropagation(),t._show(location.hash.substr(1)))}),"scrollRestoration"in history)history.scrollRestoration="manual";else{var h=0,f=0,m=$("html,body");e.on("scroll",function(){h=f,f=m.scrollTop()}).on("hashchange",function(){e.scrollTop(h)})}t.hide(),n.hide(),""!=location.hash&&"#"!=location.hash&&e.on("load",function(){t._show(location.hash.substr(1),!0)})});